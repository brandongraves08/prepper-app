generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Person {
  id                  Int     @id @default(autoincrement())
  name                String
  age                 Int
  dietaryRestrictions String?
  dailyConsumption    Int // calories per day
}

model Category {
  id          Int        @id @default(autoincrement())
  name        String     @unique
  description String?
  foodItems   FoodItem[]
  supplies    Supply[]
}

model Location {
  id          Int        @id @default(autoincrement())
  name        String     @unique
  description String?
  foodItems   FoodItem[]
  supplies    Supply[]
}

model FoodItem {
  id              Int       @id @default(autoincrement())
  name            String
  quantity        Int
  unit            String
  caloriesPerUnit Int
  expiryDate      DateTime
  // Enhanced nutritional information
  protein         Float? // grams per unit
  carbs           Float? // grams per unit
  fat             Float? // grams per unit
  barcode         String? // for barcode scanning
  notes           String?
  // Relations
  categoryId      Int?
  category        Category? @relation(fields: [categoryId], references: [id])
  locationId      Int?
  location        Location? @relation(fields: [locationId], references: [id])
}

model Supply {
  id         Int       @id @default(autoincrement())
  name       String
  quantity   Int
  unit       String?
  expiryDate DateTime?
  notes      String?
  // Relations
  categoryId Int?
  category   Category? @relation(fields: [categoryId], references: [id])
  locationId Int?
  location   Location? @relation(fields: [locationId], references: [id])
}
