var $e=Object.defineProperty;var ve=(e,t,n)=>t in e?$e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ne=(e,t,n)=>ve(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))l(i);new MutationObserver(i=>{for(const u of i)if(u.type==="childList")for(const s of u.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&l(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const u={};return i.integrity&&(u.integrity=i.integrity),i.referrerPolicy&&(u.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?u.credentials="include":i.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function l(i){if(i.ep)return;i.ep=!0;const u=n(i);fetch(i.href,u)}})();function S(){}function me(e){return e()}function ue(){return Object.create(null)}function D(e){e.forEach(me)}function he(e){return typeof e=="function"}function X(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Ee(e){return Object.keys(e).length===0}function Ce(e,...t){if(e==null){for(const l of t)l(void 0);return S}const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function Le(e,t,n){e.$$.on_destroy.push(Ce(t,n))}function c(e,t){e.appendChild(t)}function b(e,t,n){e.insertBefore(t,n||null)}function h(e){e.parentNode&&e.parentNode.removeChild(e)}function qe(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function y(e){return document.createElement(e)}function M(e){return document.createTextNode(e)}function E(){return M(" ")}function be(){return M("")}function N(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function q(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function ye(e){return e===""?null:+e}function ze(e){return Array.from(e.childNodes)}function R(e,t){t=""+t,e.data!==t&&(e.data=t)}function j(e,t){e.value=t??""}function B(e,t,n,l){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,"")}function F(e,t,n){e.classList.toggle(t,!!n)}let G;function V(e){G=e}function Me(){if(!G)throw new Error("Function called outside component initialization");return G}function se(e){Me().$$.on_mount.push(e)}const W=[],fe=[];let H=[];const ce=[],Ne=Promise.resolve();let ie=!1;function Se(){ie||(ie=!0,Ne.then(ke))}function re(e){H.push(e)}const le=new Set;let K=0;function ke(){if(K!==0)return;const e=G;do{try{for(;K<W.length;){const t=W[K];K++,V(t),Ae(t.$$)}}catch(t){throw W.length=0,K=0,t}for(V(null),W.length=0,K=0;fe.length;)fe.pop()();for(let t=0;t<H.length;t+=1){const n=H[t];le.has(n)||(le.add(n),n())}H.length=0}while(W.length);for(;ce.length;)ce.pop()();ie=!1,le.clear(),V(e)}function Ae(e){if(e.fragment!==null){e.update(),D(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(re)}}function Ie(e){const t=[],n=[];H.forEach(l=>e.indexOf(l)===-1?t.push(l):n.push(l)),n.forEach(l=>l()),H=t}const Y=new Set;let U;function Oe(){U={r:0,c:[],p:U}}function je(){U.r||D(U.c),U=U.p}function Q(e,t){e&&e.i&&(Y.delete(e),e.i(t))}function J(e,t,n,l){if(e&&e.o){if(Y.has(e))return;Y.add(e),U.c.push(()=>{Y.delete(e),l&&(n&&e.d(1),l())}),e.o(t)}else l&&l()}function de(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function oe(e){e&&e.c()}function Z(e,t,n){const{fragment:l,after_update:i}=e.$$;l&&l.m(t,n),re(()=>{const u=e.$$.on_mount.map(me).filter(he);e.$$.on_destroy?e.$$.on_destroy.push(...u):D(u),e.$$.on_mount=[]}),i.forEach(re)}function x(e,t){const n=e.$$;n.fragment!==null&&(Ie(n.after_update),D(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function De(e,t){e.$$.dirty[0]===-1&&(W.push(e),Se(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ee(e,t,n,l,i,u,s=null,o=[-1]){const f=G;V(e);const r=e.$$={fragment:null,ctx:[],props:u,update:S,not_equal:i,bound:ue(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(f?f.$$.context:[])),callbacks:ue(),dirty:o,skip_bound:!1,root:t.target||f.$$.root};s&&s(r.root);let _=!1;if(r.ctx=n?n(e,t.props||{},(w,a,...m)=>{const C=m.length?m[0]:a;return r.ctx&&i(r.ctx[w],r.ctx[w]=C)&&(!r.skip_bound&&r.bound[w]&&r.bound[w](C),_&&De(e,w)),a}):[],r.update(),_=!0,D(r.before_update),r.fragment=l?l(r.ctx):!1,t.target){if(t.hydrate){const w=ze(t.target);r.fragment&&r.fragment.l(w),w.forEach(h)}else r.fragment&&r.fragment.c();t.intro&&Q(e.$$.fragment),Z(e,t.target,t.anchor),ke()}V(f)}class te{constructor(){ne(this,"$$");ne(this,"$$set")}$destroy(){x(this,1),this.$destroy=S}$on(t,n){if(!he(n))return S;const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const i=l.indexOf(n);i!==-1&&l.splice(i,1)}}$set(t){this.$$set&&!Ee(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Pe="4",T=[];function ge(e,t=S){let n;const l=new Set;function i(o){if(X(e,o)&&(e=o,n)){const f=!T.length;for(const r of l)r[1](),T.push(r,e);if(f){for(let r=0;r<T.length;r+=2)T[r][0](T[r+1]);T.length=0}}}function u(o){i(o(e))}function s(o,f=S){const r=[o,f];return l.add(r),l.size===1&&(n=t(i,u)||S),o(e),()=>{l.delete(r),l.size===0&&n&&(n(),n=null)}}return{set:i,update:u,subscribe:s}}const Be=window.matchMedia("(prefers-color-scheme: dark)").matches,Re=localStorage.getItem("theme")||(Be?"dark":"light"),we=ge(Re);we.subscribe(e=>{document.documentElement.dataset.theme=e,localStorage.setItem("theme",e)});typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Pe);function ae(e){let t;return{c(){t=y("span"),t.textContent="Loading..."},m(n,l){b(n,t,l)},d(n){n&&h(t)}}}function Ue(e){let t,n,l,i,u,s,o,f,r,_,w,a,m,C,k=e[2]&&ae();return{c(){t=y("h2"),t.textContent="Ask Local LLM",n=E(),l=y("textarea"),i=E(),u=y("br"),s=E(),o=y("button"),f=M("Ask"),r=E(),k&&k.c(),_=E(),w=y("pre"),a=M(e[1]),q(l,"rows","4"),q(l,"placeholder","Enter your question (Ctrl+Enter to send)"),q(l,"class","svelte-5t9z1f"),o.disabled=e[2],q(w,"class","svelte-5t9z1f")},m(p,$){b(p,t,$),b(p,n,$),b(p,l,$),j(l,e[0]),b(p,i,$),b(p,u,$),b(p,s,$),b(p,o,$),c(o,f),b(p,r,$),k&&k.m(p,$),b(p,_,$),b(p,w,$),c(w,a),m||(C=[N(l,"input",e[4]),N(o,"click",e[3])],m=!0)},p(p,[$]){$&1&&j(l,p[0]),$&4&&(o.disabled=p[2]),p[2]?k||(k=ae(),k.c(),k.m(_.parentNode,_)):k&&(k.d(1),k=null),$&2&&R(a,p[1])},i:S,o:S,d(p){p&&(h(t),h(n),h(l),h(i),h(u),h(s),h(o),h(r),h(_),h(w)),k&&k.d(p),m=!1,D(C)}}}function Fe(e,t,n){let l="",i="",u=!1;async function s(){if(!l.trim())return;n(2,u=!0),n(1,i="");const f=await window.prepper.ask(l);n(2,u=!1),f.ok?n(1,i=f.response):n(1,i=`Error: ${f.error}`)}se(()=>{document.addEventListener("keydown",f=>{f.ctrlKey&&f.key==="Enter"&&s()})});function o(){l=this.value,n(0,l)}return[l,i,u,s,o]}class Ke extends te{constructor(t){super(),ee(this,t,Fe,Ue,X,{})}}function Te(e){let t,n,l,i,u,s,o,f,r,_,w,a,m,C,k,p=(e[1]?"Working...":e[0])+"",$,A,L;return{c(){t=y("h2"),t.textContent="Mesh Network",n=E(),l=y("button"),i=M("Start"),u=E(),s=y("button"),o=M("Stop"),f=E(),r=y("button"),_=M("Sync"),w=E(),a=y("button"),m=M("Refresh"),C=E(),k=y("p"),$=M(p),l.disabled=e[1],s.disabled=e[1],r.disabled=e[1],a.disabled=e[1]},m(g,d){b(g,t,d),b(g,n,d),b(g,l,d),c(l,i),b(g,u,d),b(g,s,d),c(s,o),b(g,f,d),b(g,r,d),c(r,_),b(g,w,d),b(g,a,d),c(a,m),b(g,C,d),b(g,k,d),c(k,$),A||(L=[N(l,"click",e[4]),N(s,"click",e[5]),N(r,"click",e[6]),N(a,"click",e[2])],A=!0)},p(g,[d]){d&2&&(l.disabled=g[1]),d&2&&(s.disabled=g[1]),d&2&&(r.disabled=g[1]),d&2&&(a.disabled=g[1]),d&3&&p!==(p=(g[1]?"Working...":g[0])+"")&&R($,p)},i:S,o:S,d(g){g&&(h(t),h(n),h(l),h(u),h(s),h(f),h(r),h(w),h(a),h(C),h(k)),A=!1,D(L)}}}function We(e,t,n){let l="",i=!1;async function u(){n(1,i=!0);const _=await window.prepper.getMeshStatus();n(1,i=!1),_.running?n(0,l=`${_.peerCount} peer(s) connected`):n(0,l="Mesh not running")}async function s(_){n(1,i=!0),n(0,l=""),await window.prepper[_](),await u(),n(1,i=!1)}return se(u),[l,i,u,s,()=>s("startMesh"),()=>s("stopMesh"),()=>s("syncMesh")]}class He extends te{constructor(t){super(),ee(this,t,We,Te,X,{})}}function pe(e,t,n){const l=e.slice();return l[10]=t[n],l}function Qe(e){let t,n,l,i,u=de(e[0]),s=[];for(let o=0;o<u.length;o+=1)s[o]=_e(pe(e,u,o));return{c(){t=y("table"),n=y("thead"),n.innerHTML='<tr><th class="svelte-11zoroi">Name</th> <th class="svelte-11zoroi">Qty</th> <th class="svelte-11zoroi">Unit</th> <th class="svelte-11zoroi">Expiry</th></tr>',l=E(),i=y("tbody");for(let o=0;o<s.length;o+=1)s[o].c();q(t,"class","svelte-11zoroi")},m(o,f){b(o,t,f),c(t,n),c(t,l),c(t,i);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(i,null)},p(o,f){if(f&1){u=de(o[0]);let r;for(r=0;r<u.length;r+=1){const _=pe(o,u,r);s[r]?s[r].p(_,f):(s[r]=_e(_),s[r].c(),s[r].m(i,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=u.length}},d(o){o&&h(t),qe(s,o)}}}function Ve(e){let t,n,l;return{c(){t=y("p"),n=M("Error: "),l=M(e[2]),B(t,"color","red")},m(i,u){b(i,t,u),c(t,n),c(t,l)},p(i,u){u&4&&R(l,i[2])},d(i){i&&h(t)}}}function Ge(e){let t;return{c(){t=y("p"),t.textContent="Loading..."},m(n,l){b(n,t,l)},p:S,d(n){n&&h(t)}}}function _e(e){var A;let t,n,l=e[10].name+"",i,u,s,o=e[10].quantity+"",f,r,_,w=e[10].unit+"",a,m,C,k=(((A=e[10].expiryDate)==null?void 0:A.slice(0,10))||"")+"",p,$;return{c(){t=y("tr"),n=y("td"),i=M(l),u=E(),s=y("td"),f=M(o),r=E(),_=y("td"),a=M(w),m=E(),C=y("td"),p=M(k),$=E(),q(n,"class","svelte-11zoroi"),q(s,"class","svelte-11zoroi"),q(_,"class","svelte-11zoroi"),q(C,"class","svelte-11zoroi")},m(L,g){b(L,t,g),c(t,n),c(n,i),c(t,u),c(t,s),c(s,f),c(t,r),c(t,_),c(_,a),c(t,m),c(t,C),c(C,p),c(t,$)},p(L,g){var d;g&1&&l!==(l=L[10].name+"")&&R(i,l),g&1&&o!==(o=L[10].quantity+"")&&R(f,o),g&1&&w!==(w=L[10].unit+"")&&R(a,w),g&1&&k!==(k=(((d=L[10].expiryDate)==null?void 0:d.slice(0,10))||"")+"")&&R(p,k)},d(L){L&&h(t)}}}function Je(e){let t,n,l,i,u,s,o,f,r,_,w,a,m,C,k,p,$,A,L,g,d;function I(v,z){return v[1]?Ge:v[2]?Ve:Qe}let P=I(e),O=P(e);return{c(){t=y("h2"),t.textContent="Inventory",n=E(),l=y("div"),i=y("input"),u=E(),s=y("input"),o=E(),f=y("input"),r=E(),_=y("input"),w=E(),a=y("button"),m=M("Add"),k=E(),p=y("button"),$=M("Refresh"),A=E(),O.c(),L=be(),q(i,"placeholder","Name"),q(s,"type","number"),q(s,"min","1"),B(s,"width","80px"),q(f,"placeholder","Unit"),B(f,"width","80px"),q(_,"type","date"),a.disabled=C=!e[3].name.trim()||e[3].quantity<1,B(l,"margin","1rem 0"),B(l,"border","1px solid #ddd"),B(l,"padding","0.5rem"),p.disabled=e[1]},m(v,z){b(v,t,z),b(v,n,z),b(v,l,z),c(l,i),j(i,e[3].name),c(l,u),c(l,s),j(s,e[3].quantity),c(l,o),c(l,f),j(f,e[3].unit),c(l,r),c(l,_),j(_,e[3].expiryDate),c(l,w),c(l,a),c(a,m),b(v,k,z),b(v,p,z),c(p,$),b(v,A,z),O.m(v,z),b(v,L,z),g||(d=[N(i,"input",e[6]),N(s,"input",e[7]),N(f,"input",e[8]),N(_,"input",e[9]),N(a,"click",e[5]),N(p,"click",e[4])],g=!0)},p(v,[z]){z&8&&i.value!==v[3].name&&j(i,v[3].name),z&8&&ye(s.value)!==v[3].quantity&&j(s,v[3].quantity),z&8&&f.value!==v[3].unit&&j(f,v[3].unit),z&8&&j(_,v[3].expiryDate),z&8&&C!==(C=!v[3].name.trim()||v[3].quantity<1)&&(a.disabled=C),z&2&&(p.disabled=v[1]),P===(P=I(v))&&O?O.p(v,z):(O.d(1),O=P(v),O&&(O.c(),O.m(L.parentNode,L)))},i:S,o:S,d(v){v&&(h(t),h(n),h(l),h(k),h(p),h(A),h(L)),O.d(v),g=!1,D(d)}}}function Xe(e,t,n){let l=[],i=!1,u="";async function s(){n(1,i=!0);const m=await window.prepper.listInventory();n(1,i=!1),m.ok?(n(0,l=m.items),n(2,u="")):n(2,u=m.error)}let o={name:"",quantity:1,unit:"pcs",expiryDate:""};async function f(){if(!o.name.trim())return;const m=await window.prepper.addInventory(o);m.ok?(n(0,l=[...l,m.item]),n(3,o={name:"",quantity:1,unit:"pcs",expiryDate:""}),n(2,u="")):n(2,u=m.error)}se(s);function r(){o.name=this.value,n(3,o)}function _(){o.quantity=ye(this.value),n(3,o)}function w(){o.unit=this.value,n(3,o)}function a(){o.expiryDate=this.value,n(3,o)}return[l,i,u,o,s,f,r,_,w,a]}class Ye extends te{constructor(t){super(),ee(this,t,Xe,Je,X,{})}}function Ze(e){let t,n;return t=new Ye({}),{c(){oe(t.$$.fragment)},m(l,i){Z(t,l,i),n=!0},i(l){n||(Q(t.$$.fragment,l),n=!0)},o(l){J(t.$$.fragment,l),n=!1},d(l){x(t,l)}}}function xe(e){let t,n;return t=new He({}),{c(){oe(t.$$.fragment)},m(l,i){Z(t,l,i),n=!0},i(l){n||(Q(t.$$.fragment,l),n=!0)},o(l){J(t.$$.fragment,l),n=!1},d(l){x(t,l)}}}function et(e){let t,n;return t=new Ke({}),{c(){oe(t.$$.fragment)},m(l,i){Z(t,l,i),n=!0},i(l){n||(Q(t.$$.fragment,l),n=!0)},o(l){J(t.$$.fragment,l),n=!1},d(l){x(t,l)}}}function tt(e){let t,n,l,i,u,s,o,f,r,_,w,a,m,C,k,p,$;const A=[et,xe,Ze],L=[];function g(d,I){return d[0]==="ask"?0:d[0]==="mesh"?1:d[0]==="inventory"?2:-1}return~(a=g(e))&&(m=L[a]=A[a](e)),{c(){t=y("nav"),n=y("button"),n.textContent="Ask",l=E(),i=y("button"),i.textContent="Mesh",u=E(),s=y("button"),s.textContent="Inventory",o=E(),f=y("span"),r=E(),_=y("button"),_.textContent="ðŸŒ“",w=E(),m&&m.c(),C=be(),q(n,"class","svelte-1e5jipc"),F(n,"active",e[0]==="ask"),q(i,"class","svelte-1e5jipc"),F(i,"active",e[0]==="mesh"),q(s,"class","svelte-1e5jipc"),F(s,"active",e[0]==="inventory"),B(f,"flex","1"),q(_,"class","svelte-1e5jipc"),q(t,"class","svelte-1e5jipc")},m(d,I){b(d,t,I),c(t,n),c(t,l),c(t,i),c(t,u),c(t,s),c(t,o),c(t,f),c(t,r),c(t,_),b(d,w,I),~a&&L[a].m(d,I),b(d,C,I),k=!0,p||($=[N(n,"click",e[2]),N(i,"click",e[3]),N(s,"click",e[4]),N(_,"click",e[5])],p=!0)},p(d,[I]){(!k||I&1)&&F(n,"active",d[0]==="ask"),(!k||I&1)&&F(i,"active",d[0]==="mesh"),(!k||I&1)&&F(s,"active",d[0]==="inventory");let P=a;a=g(d),a!==P&&(m&&(Oe(),J(L[P],1,1,()=>{L[P]=null}),je()),~a?(m=L[a],m||(m=L[a]=A[a](d),m.c()),Q(m,1),m.m(C.parentNode,C)):m=null)},i(d){k||(Q(m),k=!0)},o(d){J(m),k=!1},d(d){d&&(h(t),h(w),h(C)),~a&&L[a].d(d),p=!1,D($)}}}function nt(e,t,n){let l;const i=ge("ask");return Le(e,i,r=>n(0,l=r)),[l,i,()=>i.set("ask"),()=>i.set("mesh"),()=>i.set("inventory"),()=>we.update(r=>r==="dark"?"light":"dark")]}class lt extends te{constructor(t){super(),ee(this,t,nt,tt,X,{})}}new lt({target:document.getElementById("app")});
